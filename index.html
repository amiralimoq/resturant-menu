<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููู ุฑุณุชูุฑุงู</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <!-- ููุฏูฺฏ ุงููู -->
    <div id="loading-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:2000; display:flex; justify-content:center; align-items:center;">
        <p style="font-family:'Tahoma'; color:#555;">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</p>
    </div>

    <!-- ููุฏุงู ุซุจุช ูุงู -->
    <div id="register-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ุซุจุช ูุงู ูุดุชุฑ</h2>
            <p>ุจุฑุง ูุฑูุฏ ุจู ูููุ ูุดุฎุตุงุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.</p>
            <div class="input-group">
                <label>ูุงู <span class="required">*</span></label>
                <input type="text" id="reg-fname" placeholder="ูุซุงู: ุนู">
            </div>
            <div class="input-group">
                <label>ูุงู ุฎุงููุงุฏฺฏ <span class="required">*</span></label>
                <input type="text" id="reg-lname" placeholder="ูุซุงู: ูุญูุฏ">
            </div>
            <div class="input-group">
                <label>ุดูุงุฑู ุชูุงุณ <span class="required">*</span></label>
                <input type="tel" id="reg-phone" placeholder="0912...">
            </div>
            <button onclick="registerUser()">ุซุจุช ู ุงุฏุงูู</button>
        </div>
    </div>

    <!-- ููุฏุงู ุดูุงุฑู ูุฒ -->
    <div id="table-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ุดูุงุฑู ูุฒ</h2>
            <p class="welcome-text" id="welcome-msg">ุฎูุด ุขูุฏุฏ</p>
            <p>ูุทูุงู ุดูุงุฑู ูุฒ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
            <input type="number" id="table-num" placeholder="ุดูุงุฑู ูุฒ" style="font-size: 20px; text-align: center;">
            <button onclick="confirmTable()">ูุฑูุฏ ุจู ููู</button>
            <button onclick="logout()" class="btn-text">ุฎุฑูุฌ ุงุฒ ุญุณุงุจ ฺฉุงุฑุจุฑ</button>
        </div>
    </div>

    <!-- ฺฉุงูุชูุฑ ุงุตู ุจุฑูุงูู -->
    <div id="main-container" class="hidden">
        <header>
            <button class="change-table-btn" onclick="changeTable()">๐ ุชุบุฑ ูุฒ</button>
            <h1>ุฑุณุชูุฑุงู ูุง ๐ฝ๏ธ</h1>
            <div id="user-info-display"></div>
        </header>

        <!-- ุตูุญุงุช ุจุฑูุงูู (ููู ู ุณุจุฏ ุฎุฑุฏ) -->
        <div id="app-pages">
            
            <!-- ุตูุญู ฑ: ููู -->
            <div id="menu-page">
                <div id="menu-container">
                    <!-- ูุณุช ุบุฐุงูุง ุงูุฌุง ูพุฑ ูโุดูุฏ -->
                </div>
            </div>

            <!-- ุตูุญู ฒ: ุณุจุฏ ุฎุฑุฏ -->
            <div id="cart-page" class="hidden">
                <div class="cart-header">
                    <h2>ุณุจุฏ ุฎุฑุฏ ุดูุง</h2>
                    <p style="font-size:12px; color:#777;">ุขุชูโูุง ุงูุชุฎุงุจ ุดุฏู ุฑุง ุจุฑุฑุณ ู ุชุงุฏ ฺฉูุฏ</p>
                </div>

                <div id="cart-items-list">
                    <!-- ุขุชูโูุง ุณุจุฏ ุฎุฑุฏ ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดููุฏ -->
                </div>

                <div id="cart-footer">
                    <div class="total-row">
                        <span>ูุจูุบ ูุงุจู ูพุฑุฏุงุฎุช:</span>
                        <span id="cart-total-page">0 ุชููุงู</span>
                    </div>
                    <button id="order-btn" onclick="placeOrder()">ุชุงุฏ ู ุซุจุช ููุง ุณูุงุฑุด</button>
                    
                    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                    
                    <!-- ุฏฺฉูู ุชุงุฑุฎฺู ุณูุงุฑุดุงุช (ุฏุฑูู ุณุจุฏ ุฎุฑุฏ) -->
                    <button class="history-btn-block" onclick="openHistory()">
                        ๐ ูุดุงูุฏู ุชุงุฑุฎฺู ุณูุงุฑุดุงุช ูุจู
                    </button>
                </div>
            </div>

        </div>

        <!-- ููุงุฑ ูุงูุจุฑ ูพุงู (Navigation Bar) -->
        <nav id="bottom-nav">
            <div class="nav-item active" onclick="switchTab('menu')" id="nav-btn-menu">
                <span class="nav-icon">๐</span>
                <span class="nav-text">ููู</span>
            </div>
            <div class="nav-item" onclick="switchTab('cart')" id="nav-btn-cart">
                <div class="badge-container">
                    <span class="nav-icon">๐</span>
                    <span id="cart-badge" class="badge hidden">0</span>
                </div>
                <span class="nav-text">ุณุจุฏ ุฎุฑุฏ</span>
            </div>
        </nav>
    </div>

    <!-- ููุฏุงู ุชุงุฑุฎฺู ุณูุงุฑุดุงุช -->
    <div id="history-modal" class="modal hidden">
        <div class="modal-content" style="max-height: 80%; overflow-y: auto;">
            <h2>ุณูุงุฑุดุงุช ฺฏุฐุดุชู</h2>
            <div id="history-list"></div>
            <button onclick="closeHistory()" style="background:#555; margin-top:15px;">ุจุณุชู</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
