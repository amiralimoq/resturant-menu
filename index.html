<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููู ุฑุณุชูุฑุงู</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <!-- ููุฏูฺฏ -->
    <div id="loading-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:2000; display:flex; justify-content:center; align-items:center;">
        <p style="font-family:'Tahoma'; color:#555;">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</p>
    </div>

    <!-- ููุฏุงู ุซุจุช ูุงู -->
    <div id="register-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ุซุจุช ูุงู ูุดุชุฑ</h2>
            <p>ุจุฑุง ูุฑูุฏุ ูุดุฎุตุงุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.</p>
            <div class="input-group">
                <label>ูุงู <span class="required">*</span></label>
                <input type="text" id="reg-fname" placeholder="ูุซุงู: ุนู">
            </div>
            <div class="input-group">
                <label>ูุงู ุฎุงููุงุฏฺฏ <span class="required">*</span></label>
                <input type="text" id="reg-lname" placeholder="ูุซุงู: ูุญูุฏ">
            </div>
            <div class="input-group">
                <label>ุดูุงุฑู ุชูุงุณ <span class="required">*</span></label>
                <input type="tel" id="reg-phone" placeholder="0912...">
            </div>
            <button onclick="registerUser()">ุซุจุช ู ุงุฏุงูู</button>
        </div>
    </div>

    <!-- ููุฏุงู ุดูุงุฑู ูุฒ -->
    <div id="table-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ุดูุงุฑู ูุฒ</h2>
            <p class="welcome-text" id="welcome-msg">ุฎูุด ุขูุฏุฏ</p>
            <p>ูุทูุงู ุดูุงุฑู ูุฒ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
            <input type="number" id="table-num" placeholder="ุดูุงุฑู ูุฒ" style="font-size: 20px; text-align: center;">
            <button onclick="confirmTable()">ูุฑูุฏ ุจู ููู</button>
            <button onclick="logout()" class="btn-text">ุฎุฑูุฌ</button>
        </div>
    </div>

    <!-- ฺฉุงูุชูุฑ ุงุตู -->
    <div id="main-container" class="hidden">
        <header>
            <!-- ุฑุฏู ุจุงูุง: ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ (ฺูพ) + ุฏฺฉููโูุง ฺฉุงุฑุจุฑุฏ (ุฑุงุณุช) -->
            <div class="header-top-row">
                <div id="user-info-display">
                    <!-- ุงูุฌุง ุจุง ุฌุงูุงุงุณฺฉุฑูพุช ูพุฑ ูโุดูุฏ -->
                </div>
                
                <div class="header-actions">
                     <button class="action-btn favorites-btn" onclick="openFavorites()">โค๏ธ ูููู ููุดฺฏ</button>
                     <button class="action-btn change-btn" onclick="changeTable()">๐ ูุฒ</button>
                </div>
            </div>

            <!-- ุนููุงู ุฑุณุชูุฑุงู -->
            <h1 class="restaurant-title">ุฑุณุชูุฑุงู ูุง ๐ฝ๏ธ</h1>
        </header>

        <div id="app-pages">
            <!-- ููู -->
            <div id="menu-page">
                <div id="menu-container"></div>
            </div>

            <!-- ุณุจุฏ ุฎุฑุฏ -->
            <div id="cart-page" class="hidden">
                <div class="cart-header">
                    <h2>ุณุจุฏ ุฎุฑุฏ</h2>
                </div>
                <div id="cart-items-list"></div>
                <div id="cart-footer">
                    <div class="total-row">
                        <span>ูุงุจู ูพุฑุฏุงุฎุช:</span>
                        <span id="cart-total-page">0 ุชููุงู</span>
                    </div>
                    <button id="order-btn" onclick="placeOrder()">ุซุจุช ุณูุงุฑุด</button>
                    <hr style="margin: 20px 0; border:0; border-top:1px solid #eee;">
                    <button class="history-btn-block" onclick="openHistory()">๐ ุชุงุฑุฎฺู ุณูุงุฑุดุงุช</button>
                </div>
            </div>
        </div>

        <!-- ููุงุฑ ูพุงู -->
        <nav id="bottom-nav">
            <div class="nav-item active" onclick="switchTab('menu')" id="nav-btn-menu">
                <span class="nav-icon">๐</span>
                <span class="nav-text">ููู</span>
            </div>
            <div class="nav-item" onclick="switchTab('cart')" id="nav-btn-cart">
                <div class="badge-container">
                    <span class="nav-icon">๐</span>
                    <span id="cart-badge" class="badge hidden">0</span>
                </div>
                <span class="nav-text">ุณุจุฏ ุฎุฑุฏ</span>
            </div>
        </nav>
    </div>

    <!-- ููุฏุงู ุชุงุฑุฎฺู (ููู ุณูุงุฑุดุงุช) -->
    <div id="history-modal" class="modal hidden">
        <div class="modal-content" style="max-height: 80%; overflow-y: auto;">
            <h2>ุณูุงุฑุดุงุช ฺฏุฐุดุชู</h2>
            <div id="history-list"></div>
            <button onclick="closeModal('history-modal')" style="background:#555; margin-top:15px;">ุจุณุชู</button>
        </div>
    </div>

    <!-- ููุฏุงู ูููู ููุดฺฏ (ฑฐ ุณูุงุฑุด ุขุฎุฑ) -->
    <div id="favorites-modal" class="modal hidden">
        <div class="modal-content" style="max-height: 80%; overflow-y: auto;">
            <h2>โค๏ธ ูููู ููุดฺฏ</h2>
            <p style="font-size:12px; margin-bottom:15px;">ฑฐ ุณูุงุฑุด ุขุฎุฑ ุดูุง. ุจุง ุฒุฏู ุฏฺฉููุ ููู ุงูุงู ุณูุงุฑุด ุฏูุฏ.</p>
            <div id="favorites-list"></div>
            <button onclick="closeModal('favorites-modal')" style="background:#555; margin-top:15px;">ุจุณุชู</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
